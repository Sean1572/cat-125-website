(this["webpackJsonpcat-125-website"]=this["webpackJsonpcat-125-website"]||[]).push([[0],{20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/1800.fbc4a70e.jpg"},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),r=a(15),s=a.n(r),c=(a(20),a(5)),o=a(6),l=a(8),d=a(7),u=a(4),h=a.n(u),b=a(13),m=a.n(b),g=a(14),v=a.n(g);var j=function(e){window.location.href=e},p=a(0),f=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(p.jsx)("button",{onClick:this.props.onclick,className:"App-Button",children:this.props.text})}}]),a}(n.a.Component),x=(n.a.Component,f),w=[["https://cdn.download.ams.birds.cornell.edu/api/v1/asset/173621671/1200",!1],[a.p+"static/media/init.0d5414a3.wav",!0],[a.p+"static/media/XC425555 - Screaming Piha - Lipaugus vociferans.27a597bf.wav",!0],[a.p+"static/media/XC552343 - Screaming Piha - Lipaugus vociferans.4874c647.wav",!0],[a.p+"static/media/XC591821 - Screaming Piha - Lipaugus vociferans.568ff1bc.wav",!0],[a.p+"static/media/XC591823 - Screaming Piha - Lipaugus vociferans.31cb56d5.wav",!0],[a.p+"static/media/XC610236 - Screaming Piha - Lipaugus vociferans (1).0d5414a3.wav",!0],[a.p+"static/media/610103__martian__street-building-front-door-code-beeps-door-open-close-rx.3de0e4ff.wav",!0],[a.p+"static/media/124546__cubix__waterdrop.c5bed59e.wav",!0],[a.p+"static/media/376804__amholma__waves-up-close-2.66ae3b32.wav",!0]];var y=function(e){for(var t=w.length,a=[],i=[],n=0;n<t;n++)a.push(n);for(var r=0;r<=e;r++){var s=Math.round(Math.random()*t);a.slice(a.indexOf(s)),t=a.length,i.push(w[s])}return[["https://pbs.twimg.com/profile_images/417319779943215104/gWMGH_Nx_400x400.jpeg",!1],["https://cdn.download.ams.birds.cornell.edu/api/v1/asset/173621671/1200",!1]]},O=(a(22),function(){function e(t){Object(c.a)(this,e),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}return Object(o.a)(e,[{key:"getData",value:function(){return[this.x,this.y,this.width,this.height]}}]),e}()),_=function(e,t,a){!function(e,t,a){if(document.getElementById("img_annotator")){var i=document.getElementById("img_annotator").getContext("2d"),n=document.getElementById("img_annotator").getBoundingClientRect().left,r=document.getElementById("img_annotator").getBoundingClientRect().top,s=e.state,c=s.height,o=s.width,l=s.rect,d=document.getElementById("source");i.drawImage(d,0,0,c,o),console.log("render"),i.fillStyle="red",i.strokeRect(-10*Math.random()+1,-2,-5,-6),i.strokeRect(-10*Math.random()+1,-2,-5,-6),i.strokeRect(-10*Math.random()+1,-2,-5,-6),i.strokeRect(-10,-2,-5,-6),i.strokeRect(-1e3,-2,-5,-6);for(var u=0;u<l.length;u++){var h=l[u];i.fillStyle="red",i.strokeRect(h.x,h.y,h.width,h.height)}if(t&&null!=a){i.fillStyle="rgb(255, 0, 0, 0)",i.lineWidth=5,i.strokeStyle="rgb(255, 0, 0, 1)";var b=a.clientX-n,m=a.clientY-r;-1==t.x1||-1==t.y1?(i.strokeRect(b,m,5,5),e.newRect={x1:b,y1:m,width:5,height:5}):(i.strokeRect(t.x1,t.y1,b-t.x1,m-t.y1),e.newRect={x1:t.x1,y1:t.y1,width:b-t.x1,height:m-t.y1})}}}(e,t,a)},k=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).state={filename:e.filename,height:500,width:500,x1:-1,y1:-1,rHeight:-1,rWidth:-1,currentRect:null,rect:[],disable_strongly:e.disable_strongly},i.newRect={x1:-1,y1:-1,height:-1,width:-1},i.giveData=e.getDataCallback,i}return Object(o.a)(a,[{key:"tick",value:function(){_(this)}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("img_annotator");null!=t&&t.addEventListener("reset",(function(t){return e.reset(t)}),!1)}},{key:"reset",value:function(e){var t=this.state;t.height,t.width;this.setState({filename:e.detail,rect:[]}),console.log(e.detail),document.getElementById("source").src=e.detail}},{key:"mouseDone",value:function(e){clearInterval(e);var t=this.newRect,a=t.x1,i=t.y1,n=t.height,r=t.width,s=new O({x:a,y:i,height:n,width:r});this.state.rect.push(s)}},{key:"mouseDown",value:function(e){var t=this.state.disable_strongly;if(console.log(t),!t){document.getElementById("img_annotator");var a=this.newRect;a.x1,a.y1,a.height,a.width;e.buttons>0&&_(this,this.newRect,e)}}},{key:"mouseUp",value:function(){if(!this.state.disable_strongly){var e=this.newRect,t=e.x1,a=e.y1,i=e.height,n=e.width,r=new O({x:t,y:a,height:i,width:n});this.state.rect.push(r),this.newRect={x1:-1,y1:-1,height:-1,width:-1},this.giveData(this.state.rect)}}},{key:"undo",value:function(e){this.state.rect.pop(),_(this,this.newRect,null)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filename,i=t.height,n=t.width;t.x;return console.log(a),null!=a?Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{id:"img_storage",style:{display:"none"},children:Object(p.jsx)("img",{id:"source",src:a,width:n,height:i,onLoad:function(){return _(e,e.newRect,null)}})}),Object(p.jsx)("canvas",{id:"img_annotator",onMouseMove:function(t){return e.mouseDown(t)},onMouseUp:function(t){return e.mouseUp(t)},width:n,height:i}),Object(p.jsx)("div",{children:Object(p.jsx)(x,{onclick:function(t){return e.undo(t)},text:"undo"})})]}):null}}]),a}(n.a.Component),S=a(2),C={"/cat-125-website/static/media/init.0d5414a3.wav":{data:"bird",time:5282},"/cat-125-website/static/media/XC425555 - Screaming Piha - Lipaugus vociferans.27a597bf.wav":{data:"bird",time:1599},"/cat-125-website/static/media/XC552343 - Screaming Piha - Lipaugus vociferans.4874c647.wav":{data:"bird",time:2889},"/cat-125-website/static/media/XC591821 - Screaming Piha - Lipaugus vociferans.568ff1bc.wav":{data:"bird",time:1543},"/cat-125-website/static/media/XC591823 - Screaming Piha - Lipaugus vociferans.31cb56d5.wav":{data:"bird",time:1239},"/cat-125-website/static/media/XC610236 - Screaming Piha - Lipaugus vociferans (1).0d5414a3.wav":{data:"bird",time:1103},"/cat-125-website/static/media/610103__martian__street-building-front-door-code-beeps-door-open-close-rx.3de0e4ff.wav":{data:"no bird",time:1391},"/cat-125-website/static/media/124546__cubix__waterdrop.c5bed59e.wav":{data:"no bird",time:1519},"/cat-125-website/static/media/376804__amholma__waves-up-close-2.66ae3b32.wav":{data:"no bird",time:1023},"https://pbs.twimg.com/profile_images/417319779943215104/gWMGH_Nx_400x400.jpeg":{data:"bird",time:1965},"https://cdn.download.ams.birds.cornell.edu/api/v1/asset/173621671/1200":{data:"bird",time:3151}},L={"/cat-125-website/static/media/init.0d5414a3.wav":{time:10921,data:{start:6.4763844433593745,end:8.226571110026041}},"/cat-125-website/static/media/XC425555 - Screaming Piha - Lipaugus vociferans.27a597bf.wav":{time:5837,data:{start:6.4763844433593745,end:8.257824443359375}},"/cat-125-website/static/media/XC552343 - Screaming Piha - Lipaugus vociferans.4874c647.wav":{time:5446,data:{start:12.030777798051288,end:14.93552647108738}},"/cat-125-website/static/media/XC591821 - Screaming Piha - Lipaugus vociferans.568ff1bc.wav":{time:14943,data:{start:6.397395698992412,end:6.951016532325745}},"/cat-125-website/static/media/XC591823 - Screaming Piha - Lipaugus vociferans.31cb56d5.wav":{time:8526,data:{start:3.38964163690567,end:4.81905913690567}},"/cat-125-website/static/media/XC610236 - Screaming Piha - Lipaugus vociferans (1).0d5414a3.wav":{time:5158,data:{start:2.777819616678026,end:4.1107598944558035}},"/cat-125-website/static/media/610103__martian__street-building-front-door-code-beeps-door-open-close-rx.3de0e4ff.wav":{time:3951},"/cat-125-website/static/media/124546__cubix__waterdrop.c5bed59e.wav":{time:1922},"/cat-125-website/static/media/376804__amholma__waves-up-close-2.66ae3b32.wav":{time:623},"https://cdn.download.ams.birds.cornell.edu/api/v1/asset/173621671/1200":{time:4717,data:{start:6.55555534362793,end:492.55555534362793,top:469.0138854980469,bot:29.013885498046875}}};var I=function(e){var t={},a=Number(localStorage.getItem("label"));console.log(a),t=1!=a?L:C;var i=0,n=0,r=0;for(var s in e.old_labels){r++;var c=e.old_labels[s],o=t[s].data;if(console.log(c,o),1==a)i=c.data==o?i+1:i,n=c.data==o?n+100:n;else if(1!=a)if(null==c||null==c.data)null!=t[s]&&null!=t[s].data||(i+=1,n+=100);else{var l=c.data,d=50;null!=l.start&&null!=l.start&&(d=25,Math.abs(l.top-o.top)<5&&(i+=1,n+=d),Math.abs(l.bot-o.bot)<5&&(i+=1,n+=d)),console.log(Math.abs(l.start-o.start)<5),Math.abs(l.start-o.start)<5&&(i+=1,n+=d),Math.abs(l.end-o.end)<5&&(i+=1,n+=d)}i<0&&(i=0)}return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("p",{children:"YOU SCORED"}),Object(p.jsxs)("p",{children:[i," points with ",n/r,"% accuracy"]}),"Do you want to play again?",Object(p.jsx)(x,{onclick:function(){return j("/annotate_start")},text:"Click Here to return to the game start page"})]})})};function P(e,t){var a=Object(S.f)();return Object(p.jsx)("div",{id:"redirect",onClick:function(){a("/annotate_Scoring",{state:{data:t}})}})}var B=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var i;Object(c.a)(this,a),i=t.call(this,e);var n=Number(localStorage.getItem("label")),r=Number(localStorage.getItem("visual"));return i.state={wavesurfer:null,spectrogram:1==r,label:n,curr:0,curr_labels:null,old_labels:{},audio:!0,files:null,rect_data:[]},i}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.spectrogram,a=e.label,i=!0;if(t&&1!=a)(n=h.a.create({container:"#waveform",scrollParent:!0,fillParent:!0,height:256,barHeight:0,barGap:1e8,waveColor:"rgba(0,0,0,0)",progressColor:"rgba(0,0,0,0)",plugins:[m.a.create({dragSelection:{slop:5}}),v.a.create({wavesurfer:n,container:"#spectrogram",scrollParent:!0})]})).on("error",(function(e){return console.log(e)})),n.once("ready",(function(){document.getElementById("forecast-table");document.getElementsByTagName("spectrogram")[0].firstElementChild.style.position="relative",document.getElementById("waveform").firstElementChild.style.display="block"}));else if(1!=a)var n=h.a.create({container:"#waveform",scrollParent:!0,fillParent:!0,height:256,plugins:[m.a.create({dragSelection:{slop:5}})]});else if(1==a&&t){(n=h.a.create({container:"#waveform",scrollParent:!0,fillParent:!0,height:256,barHeight:0,barGap:1e8,waveColor:"rgba(0,0,0,0)",progressColor:"rgba(0,0,0,0)",plugins:[v.a.create({wavesurfer:n,container:"#spectrogram",scrollParent:!0})]})).on("error",(function(e){return console.log(e)})),n.once("ready",(function(){document.getElementById("forecast-table");document.getElementsByTagName("spectrogram")[0].firstElementChild.style.position="relative",document.getElementById("waveform").firstElementChild.style.display="block"}))}else n=h.a.create({container:"#waveform",scrollParent:!0,fillParent:!0,height:256});var r=y(1);console.log(r),r[0][1]?n.load(r[0][0]):i=!1,n.un("play",(function(){}));var s=Date.now();this.setState({wavesurfer:n,files:r,start:s,audio:i})}},{key:"getStronglyImageData",value:function(e){this.setState({rect_data:e})}},{key:"annotationLabeled",value:function(e){var t=this.state.curr_labels;null!=e&&(t=e),this.setState({curr_labels:t})}},{key:"saveLabels",value:function(e){console.log("savedLabels");var t=this.state,a=t.curr,i=t.files,n=t.start,r=t.curr_labels,s=t.wavesurfer,c=t.rect_data;a>0&&a--;var o=e-n,l=this.state.old_labels;if(null!=r)l[i[a][0]]={data:r,time:o};else if(i[a][1]){l[i[a][0]]={time:o};var d=s.regions.list;for(var u in d)u=d[u],l[i[a][0]].data={start:u.start,end:u.end};s.clearRegions()}else{l[i[a][0]]={time:o};for(var h=0;h<c.length;h++){var b=c[h];l[i[a][0]].data={start:b.x,end:b.width+b.x,top:b.y,bot:b.height+b.y}}}this.setState({old_labels:l})}},{key:"next",value:function(){var e=Date.now(),t=this.state.curr;0==t&&(t=1),console.log(t);var a=this.state,i=a.wavesurfer,n=a.files,r=a.curr_labels,s=a.label;a.old_labels;if(null!=r||1!=s){var c=!1;this.saveLabels(e),t>=n.length?this.setState({scoreboard:!0}):n[t][1]?(i.load(n[t][0]),c=!0):this.resetImageLabeling(n[t][0]);var o=t+1,l=Date.now();this.setState({start:l,curr:o,curr_labels:null,audio:c})}}},{key:"resetImageLabeling",value:function(e){var t=new CustomEvent("reset",{detail:e}),a=document.getElementById("img_annotator");a&&a.dispatchEvent(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.wavesurfer,i=t.label,n=t.old_labels,r=t.scoreboard,s=t.audio,c=t.curr,o=t.files;console.log(n);var l=s?"block":"none",d=!s,u=null;return null!=o&&c<o.length&&(console.log(c,o.length),u=o[c][0]),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("header",{className:"App-header",children:[r?Object(p.jsx)("div",{children:Object(p.jsx)(I,{old_labels:n})}):Object(p.jsxs)("div",{className:"App-header",children:[Object(p.jsx)("p",{children:"Gameplay is here"}),Object(p.jsx)("script",{src:"https://unpkg.com/wavesurfer.js"}),Object(p.jsx)("script",{src:"https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"}),Object(p.jsx)("div",{id:"waveform",className:"waveform",style:{display:l}}),Object(p.jsx)("div",{id:"spectrogram",className:"spectrogram_div",style:{display:l}}),d?Object(p.jsx)(k,{filename:u,getDataCallback:function(t){return e.getStronglyImageData(t)},disable_strongly:1==i}):Object(p.jsx)(x,{onclick:function(){return a.play()},text:"Play"}),Object(p.jsx)("div",{style:{height:"10px"}}),1==i?Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{onclick:function(){return e.annotationLabeled("bird")},text:"Bird"}),Object(p.jsx)(x,{onclick:function(){return e.annotationLabeled("no bird")},text:"No Bird"})]}):null,Object(p.jsx)(x,{onclick:function(){return e.next()},text:"Next"})]}),Object(p.jsx)(P,{path:"/annotate_Scoring",data:n})]})})}}]),a}(n.a.Component);function E(e){var t=Number(e.target.value),a=e.target.id;localStorage.setItem(a,t)}var N=function(){return Object(i.useEffect)((function(){var e=localStorage.getItem("label"),t=localStorage.getItem("visual");null==e&&localStorage.setItem("label",0),null==t&&localStorage.setItem("visual",0)})),Object(p.jsxs)("div",{style:{alignContent:"center"},children:[Object(p.jsx)("p",{children:"Game Settings"}),Object(p.jsx)("label",{for:"label",children:"Weakly / Strongly / Both"}),Object(p.jsx)("div",{style:{height:"0px"}}),Object(p.jsxs)("select",{onChange:function(e){return E(e)},name:"label",id:"label",children:[Object(p.jsx)("option",{value:0,defaultValue:!0,children:"Both"}),Object(p.jsx)("option",{value:1,children:"Weakly"}),Object(p.jsx)("option",{value:2,children:"Strongly"})]}),Object(p.jsx)("div",{style:{height:"20px"}}),Object(p.jsx)("text",{children:"(Audio Only) "}),Object(p.jsx)("div",{style:{height:"0px"}}),Object(p.jsx)("label",{for:"label",children:"Spectrogram / Waveform"}),Object(p.jsx)("div",{style:{height:"5px"}}),Object(p.jsxs)("select",{onChange:function(e){return E(e)},name:"visual",id:"visual",children:[Object(p.jsx)("option",{value:0,children:"Waveform"}),Object(p.jsx)("option",{value:1,children:"Spectrogram"})]})]})};var R=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("p",{children:"Gameplay Landing is here If it is your frist time, we reccomend jumping in right away!"}),Object(p.jsx)(x,{onclick:function(){return j("/annotate")},text:"Click Here to Start Annotating"}),Object(p.jsx)(N,{})]})})};var D=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("header",{className:"App-header",children:Object(p.jsx)("p",{children:"Leaderboard is here"})})})};var M=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("p",{children:"Landing Page For Website?"}),Object(p.jsx)(x,{onclick:function(){j("/annotate_start")},text:"Ready To Start Playing?"})]})})};a.p;var X=a(10);a(23);var A=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("script",{src:"https://unpkg.com/wavesurfer.js"}),Object(p.jsx)("script",{src:"https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.min.js"}),Object(p.jsx)(X.a,{children:Object(p.jsxs)(S.c,{children:[Object(p.jsx)(S.a,{path:"/cat-125-website",element:Object(p.jsx)(M,{})}),Object(p.jsx)(S.a,{path:"/localhost",element:Object(p.jsx)(M,{})}),Object(p.jsx)(S.a,{path:"/",element:Object(p.jsx)(M,{})}),Object(p.jsx)(S.a,{path:"/annotate",element:Object(p.jsx)(B,{})}),Object(p.jsx)(S.a,{path:"/annotate_start",element:Object(p.jsx)(R,{})}),Object(p.jsx)(S.a,{path:"/annotate_LeaderBoard",element:Object(p.jsx)(D,{})}),Object(p.jsx)(S.a,{path:"/annotate_scoring",element:Object(p.jsx)(I,{})})]})})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),i(e),n(e),r(e),s(e)}))};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(A,{})}),document.getElementById("root")),W()}},[[24,1,2]]]);
//# sourceMappingURL=main.afedd049.chunk.js.map